
<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WritgoAI - Content Generator v15</title>
    <style>
        :root {
            --dark-blue: #0C1E43;
            --light-blue: #00AEEF;
            --deep-blue: #004E92;
            --orange: #FFA62B;
            --dark-orange: #E36C1E;
            --yellow-orange: #FFB443;
            --icon-blue: #0098D8;
            --icon-dark-blue: #004C91;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--dark-blue) 0%, var(--deep-blue) 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .app-container {
            display: flex;
            height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--dark-blue);
            color: white;
            padding: 20px;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.3);
        }
        
        .logo {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light-blue);
        }
        
        .logo h1 {
            font-size: 24px;
            color: var(--light-blue);
            margin-bottom: 5px;
        }
        
        .logo p {
            font-size: 14px;
            color: var(--orange);
            font-weight: 600;
        }
        
        .menu-item {
            padding: 15px 20px;
            margin: 10px 0;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        
        .menu-item:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: var(--orange);
            transform: translateX(5px);
        }
        
        .menu-item.active {
            background: linear-gradient(90deg, var(--deep-blue), var(--light-blue));
            border-left-color: var(--orange);
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            background: #f5f7fa;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .card h2 {
            color: var(--dark-blue);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-blue);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark-blue);
            font-weight: 600;
        }
        
        input[type="text"],
        input[type="url"],
        input[type="number"],
        input[type="password"],
        textarea,
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--light-blue);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        button {
            background: linear-gradient(135deg, var(--light-blue), var(--deep-blue));
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,174,239,0.3);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, var(--orange), var(--dark-orange));
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: var(--light-blue);
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--light-blue);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .article-output {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
            margin-top: 20px;
        }
        
        /* Google Docs-like Text Editor */
        .docs-editor-container {
            max-width: 800px;
            margin: 20px auto;
            background: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .docs-toolbar {
            background: #f8f9fa;
            border-bottom: 1px solid #e0e0e0;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .docs-toolbar button {
            background: none;
            border: 1px solid #d0d7de;
            border-radius: 4px;
            padding: 6px 12px;
            cursor: pointer;
            font-size: 14px;
            color: #24292f;
            white-space: nowrap;
        }
        
        .docs-toolbar button:hover {
            background: #f3f4f6;
            border-color: #8c959f;
        }
        
        .docs-editor {
            min-height: 600px;
            padding: 40px 60px;
            background: white;
            font-family: 'Times New Roman', serif;
            font-size: 12pt;
            line-height: 1.6;
            color: #1a1a1a;
            outline: none;
            border: none;
        }
        
        .docs-editor:focus {
            outline: none;
        }
        
        .docs-editor h1 {
            font-size: 18pt;
            font-weight: bold;
            margin: 0 0 16pt 0;
            color: #1a1a1a;
        }
        
        .docs-editor h2 {
            font-size: 14pt;
            font-weight: bold;
            margin: 16pt 0 8pt 0;
            color: #1a1a1a;
        }
        
        .docs-editor h3 {
            font-size: 12pt;
            font-weight: bold;
            margin: 12pt 0 6pt 0;
            color: #1a1a1a;
        }
        
        .docs-editor p {
            margin: 0 0 8pt 0;
        }
        
        .docs-editor a {
            color: #1a73e8;
            text-decoration: none;
        }
        
        .docs-editor a:hover {
            text-decoration: underline;
        }
        
        .docs-editor ul, .docs-editor ol {
            margin: 8pt 0;
            padding-left: 30px;
        }
        
        .docs-editor li {
            margin-bottom: 4pt;
            line-height: 1.5;
        }
        
        .docs-editor table {
            width: 100%;
            border-collapse: collapse;
            margin: 16pt 0;
            border: 1px solid #dadce0;
        }
        
        .docs-editor table th {
            background: #f8f9fa;
            padding: 8pt;
            text-align: left;
            font-weight: 600;
            border: 1px solid #dadce0;
        }
        
        .docs-editor table td {
            padding: 8pt;
            border: 1px solid #dadce0;
        }
        
        .word-counter {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 8px 12px;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            font-size: 14px;
            color: #5f6368;
            border: 1px solid #dadce0;
        }
        
        /* AI Chat Interface */
        .ai-chat-container {
            position: fixed;
            right: 20px;
            bottom: 80px;
            width: 400px;
            max-height: 500px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
            z-index: 1000;
        }
        
        .ai-chat-container.active {
            display: flex;
        }
        
        .ai-chat-header {
            padding: 16px;
            background: linear-gradient(135deg, var(--light-blue), var(--deep-blue));
            color: white;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .ai-chat-header h3 {
            margin: 0;
            font-size: 16px;
        }
        
        .ai-chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
        }
        
        .ai-chat-messages {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
            max-height: 300px;
            min-height: 200px;
        }
        
        .ai-message {
            margin-bottom: 12px;
            padding: 10px 14px;
            border-radius: 8px;
            max-width: 85%;
        }
        
        .ai-message.user {
            background: #e3f2fd;
            margin-left: auto;
            text-align: right;
        }
        
        .ai-message.assistant {
            background: #f5f5f5;
            margin-right: auto;
        }
        
        .ai-message.system {
            background: #fff3cd;
            text-align: center;
            max-width: 100%;
            font-size: 13px;
            color: #856404;
        }
        
        .ai-chat-input-container {
            padding: 16px;
            border-top: 1px solid #e0e0e0;
        }
        
        .ai-chat-input {
            display: flex;
            gap: 8px;
        }
        
        .ai-chat-input textarea {
            flex: 1;
            min-height: 60px;
            max-height: 120px;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            resize: vertical;
            font-family: inherit;
        }
        
        .ai-chat-input button {
            padding: 10px 20px;
            align-self: flex-end;
        }
        
        .article-output h1 {
            color: var(--dark-blue);
            margin-bottom: 15px;
        }
        
        .article-output h2 {
            color: var(--deep-blue);
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        .article-output h3 {
            color: var(--icon-dark-blue);
            margin-top: 15px;
            margin-bottom: 8px;
        }
        
        .article-output p {
            line-height: 1.8;
            margin-bottom: 15px;
        }
        
        .article-output a {
            color: var(--light-blue);
            text-decoration: none;
            font-weight: 600;
        }
        
        .article-output a:hover {
            text-decoration: underline;
        }
        
        .article-output table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .article-output table th {
            background: var(--dark-blue);
            color: white;
            padding: 14px;
            text-align: left;
            font-weight: 600;
            font-size: 15px;
        }
        
        .article-output table td {
            padding: 12px 14px;
            border-bottom: 1px solid #e0e0e0;
            font-size: 14px;
        }
        
        .article-output table tr:last-child td {
            border-bottom: none;
        }
        
        .article-output table tr:hover {
            background: #f8f9fa;
        }
        
        .article-output ul, .article-output ol {
            margin: 15px 0;
            padding-left: 35px;
        }
        
        .article-output ul {
            list-style-type: disc;
        }
        
        .article-output ol {
            list-style-type: decimal;
        }
        
        .article-output li {
            margin-bottom: 10px;
            line-height: 1.7;
            padding-left: 5px;
        }
        
        .article-output li::marker {
            color: var(--light-blue);
            font-weight: bold;
        }
        
        .article-output strong {
            color: var(--dark-blue);
            font-weight: 600;
        }
        
        .article-output img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .article-output hr {
            border: none;
            border-top: 2px solid #e0e0e0;
            margin: 30px 0;
        }
        
        .stats {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }
        
        .stat-box {
            flex: 1;
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--light-blue);
        }
        
        .stat-box h4 {
            color: var(--dark-blue);
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .stat-box p {
            font-size: 24px;
            font-weight: bold;
            color: var(--light-blue);
        }
        
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .site-list {
            list-style: none;
        }
        
        .site-item {
            background: #f9f9f9;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid var(--light-blue);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .site-info h4 {
            color: var(--dark-blue);
            margin-bottom: 5px;
        }
        
        .site-info p {
            color: #666;
            font-size: 14px;
        }
        
        .site-actions {
            display: flex;
            gap: 10px;
        }
        
        .site-actions button {
            padding: 8px 15px;
            font-size: 14px;
        }
        
        .link-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 10px;
        }
        
        .link-item {
            background: #f9f9f9;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .link-info {
            flex: 1;
        }
        
        .link-info strong {
            color: var(--dark-blue);
            display: block;
            margin-bottom: 3px;
        }
        
        .link-info small {
            color: #666;
            word-break: break-all;
        }
        
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .image-item {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .image-item:hover {
            border-color: var(--light-blue);
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .image-item img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        
        .image-item.selected {
            border-color: var(--orange);
            border-width: 3px;
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }
        
        .tab {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            transition: all 0.3s;
        }
        
        .tab:hover {
            color: var(--light-blue);
        }
        
        .tab.active {
            color: var(--light-blue);
            border-bottom-color: var(--light-blue);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: var(--orange);
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        
        .mobile-menu-toggle:active {
            transform: scale(0.95);
        }
        
        /* Overlay for mobile menu */
        .mobile-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
        
        .mobile-overlay.active {
            display: block;
        }
        
        /* ============================================
           COMPREHENSIVE RESPONSIVE DESIGN
           ============================================ */
        
        /* Tablet Styles (768px - 1024px) */
        @media (max-width: 1024px) and (min-width: 769px) {
            .sidebar {
                width: 220px;
                padding: 15px;
            }
            
            .logo h1 {
                font-size: 22px;
            }
            
            .menu-item {
                padding: 12px 15px;
                font-size: 14px;
            }
            
            .main-content {
                padding: 25px;
            }
            
            .card {
                padding: 20px;
            }
            
            .two-column {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .image-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }
            
            .docs-editor-container {
                max-width: 700px;
            }
            
            .docs-editor {
                padding: 30px 40px;
            }
            
            .ai-chat-container {
                width: 350px;
            }
        }
        
        /* Mobile Styles (< 768px) */
        @media (max-width: 768px) {
            /* App Container */
            .app-container {
                flex-direction: column;
                height: auto;
                min-height: 100vh;
            }
            
            /* Mobile Menu Toggle */
            .mobile-menu-toggle {
                display: block;
            }
            
            /* Sidebar - Collapsible with Overlay */
            .sidebar {
                position: fixed;
                left: -100%;
                top: 0;
                width: 85%;
                max-width: 320px;
                height: 100vh;
                z-index: 1000;
                transition: left 0.3s ease-in-out;
                box-shadow: 4px 0 20px rgba(0,0,0,0.5);
                overflow-y: auto;
            }
            
            .sidebar.mobile-open {
                left: 0;
            }
            
            /* Logo */
            .logo {
                margin-bottom: 25px;
                padding-bottom: 15px;
            }
            
            .logo h1 {
                font-size: 22px;
            }
            
            .logo p {
                font-size: 13px;
            }
            
            /* Menu Items */
            .menu-item {
                padding: 14px 16px;
                font-size: 15px;
                margin: 8px 0;
            }
            
            .menu-item:hover {
                transform: translateX(3px);
            }
            
            /* Main Content - Full Width */
            .main-content {
                padding: 80px 16px 20px 16px;
                width: 100%;
                margin-left: 0;
            }
            
            /* Cards */
            .card {
                padding: 18px;
                margin-bottom: 16px;
                border-radius: 10px;
            }
            
            .card h2 {
                font-size: 20px;
                margin-bottom: 16px;
            }
            
            .card h3 {
                font-size: 18px;
                margin-top: 16px;
                margin-bottom: 12px;
            }
            
            /* Form Elements - Touch Friendly */
            .form-group {
                margin-bottom: 18px;
            }
            
            .form-group label {
                font-size: 15px;
                margin-bottom: 8px;
            }
            
            .form-group small {
                font-size: 13px;
            }
            
            input[type="text"],
            input[type="url"],
            input[type="number"],
            input[type="password"],
            textarea,
            select {
                font-size: 16px;
                padding: 14px;
                min-height: 48px;
                border-radius: 6px;
            }
            
            textarea {
                min-height: 120px;
            }
            
            /* Buttons - Touch Friendly (min 44px) */
            button {
                padding: 14px 24px;
                font-size: 16px;
                min-height: 48px;
                border-radius: 6px;
                width: 100%;
                margin-bottom: 10px;
            }
            
            button:last-child {
                margin-bottom: 0;
            }
            
            .site-actions button,
            .link-item button {
                width: auto;
                padding: 10px 16px;
                min-height: 44px;
                font-size: 14px;
            }
            
            /* Two Column Layout - Stack on Mobile */
            .two-column {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            /* Tabs - Responsive */
            .tabs {
                flex-wrap: wrap;
                gap: 8px;
                margin-bottom: 16px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .tab {
                padding: 12px 18px;
                font-size: 14px;
                white-space: nowrap;
                min-height: 44px;
                flex-shrink: 0;
            }
            
            /* Stats Grid - Single Column */
            .stats {
                flex-direction: column;
                gap: 12px;
            }
            
            .stat-box {
                padding: 14px;
            }
            
            .stat-box h4 {
                font-size: 13px;
            }
            
            .stat-box p {
                font-size: 20px;
            }
            
            /* Image Grid - Single Column */
            .image-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            
            .image-item img {
                height: 200px;
            }
            
            /* Site List - Responsive */
            .site-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
                padding: 14px;
            }
            
            .site-info h4 {
                font-size: 16px;
            }
            
            .site-info p {
                font-size: 13px;
                word-break: break-all;
            }
            
            .site-actions {
                width: 100%;
                flex-direction: column;
                gap: 8px;
            }
            
            .site-actions button {
                width: 100%;
            }
            
            /* Link List - Responsive */
            .link-list {
                max-height: 300px;
            }
            
            .link-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
                padding: 12px;
            }
            
            .link-info {
                width: 100%;
            }
            
            .link-info strong {
                font-size: 14px;
            }
            
            .link-info small {
                font-size: 12px;
            }
            
            /* Google Docs Editor - Responsive */
            .docs-editor-container {
                max-width: 100%;
                margin: 16px 0;
                border-radius: 8px;
            }
            
            .docs-toolbar {
                padding: 10px 12px;
                gap: 8px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .docs-toolbar button {
                padding: 8px 12px;
                font-size: 13px;
                min-height: 40px;
                flex-shrink: 0;
            }
            
            .docs-editor {
                min-height: 400px;
                padding: 20px 16px;
                font-size: 11pt;
            }
            
            .docs-editor h1 {
                font-size: 16pt;
            }
            
            .docs-editor h2 {
                font-size: 13pt;
            }
            
            .docs-editor h3 {
                font-size: 11pt;
            }
            
            /* Word Counter - Responsive Position */
            .word-counter {
                bottom: 16px;
                right: 16px;
                padding: 10px 14px;
                font-size: 13px;
            }
            
            /* AI Chat - Full Width on Mobile */
            .ai-chat-container {
                width: calc(100% - 32px);
                max-width: none;
                right: 16px;
                left: 16px;
                bottom: 70px;
                max-height: 70vh;
            }
            
            .ai-chat-header {
                padding: 14px;
            }
            
            .ai-chat-header h3 {
                font-size: 15px;
            }
            
            .ai-chat-messages {
                padding: 12px;
                max-height: 40vh;
                min-height: 150px;
            }
            
            .ai-message {
                font-size: 14px;
                padding: 10px 12px;
                max-width: 90%;
            }
            
            .ai-chat-input-container {
                padding: 12px;
            }
            
            .ai-chat-input textarea {
                min-height: 50px;
                max-height: 100px;
                font-size: 15px;
            }
            
            .ai-chat-input button {
                padding: 10px 16px;
                font-size: 14px;
                width: auto;
            }
            
            /* Article Output - Responsive Typography */
            .article-output {
                padding: 16px;
                border-radius: 6px;
            }
            
            .article-output h1 {
                font-size: 22px;
                margin-bottom: 12px;
            }
            
            .article-output h2 {
                font-size: 19px;
                margin-top: 16px;
                margin-bottom: 10px;
            }
            
            .article-output h3 {
                font-size: 17px;
                margin-top: 14px;
                margin-bottom: 8px;
            }
            
            .article-output p {
                font-size: 15px;
                line-height: 1.7;
                margin-bottom: 12px;
            }
            
            .article-output ul,
            .article-output ol {
                padding-left: 25px;
                margin: 12px 0;
            }
            
            .article-output li {
                font-size: 15px;
                margin-bottom: 8px;
                line-height: 1.6;
            }
            
            .article-output table {
                font-size: 13px;
                overflow-x: auto;
                display: block;
            }
            
            .article-output table th,
            .article-output table td {
                padding: 10px;
                font-size: 13px;
            }
            
            .article-output img {
                margin: 16px 0;
                border-radius: 6px;
            }
            
            /* Alert Messages */
            .alert {
                padding: 12px;
                font-size: 14px;
                border-radius: 6px;
            }
            
            /* Loading Spinner */
            .loading {
                padding: 16px;
            }
            
            .loading p {
                font-size: 15px;
            }
            
            .spinner {
                width: 36px;
                height: 36px;
            }
        }
        
        /* Small Mobile Styles (< 480px) */
        @media (max-width: 480px) {
            .mobile-menu-toggle {
                top: 16px;
                left: 16px;
                padding: 10px 14px;
                font-size: 18px;
            }
            
            .sidebar {
                width: 90%;
            }
            
            .main-content {
                padding: 70px 12px 16px 12px;
            }
            
            .card {
                padding: 16px;
            }
            
            .card h2 {
                font-size: 18px;
            }
            
            input[type="text"],
            input[type="url"],
            input[type="number"],
            input[type="password"],
            textarea,
            select {
                font-size: 16px;
                padding: 12px;
            }
            
            button {
                padding: 12px 20px;
                font-size: 15px;
            }
            
            .tab {
                padding: 10px 14px;
                font-size: 13px;
            }
            
            .docs-editor {
                padding: 16px 12px;
                font-size: 10pt;
            }
            
            .ai-chat-container {
                width: calc(100% - 24px);
                right: 12px;
                left: 12px;
            }
            
            .article-output h1 {
                font-size: 20px;
            }
            
            .article-output h2 {
                font-size: 17px;
            }
            
            .article-output h3 {
                font-size: 15px;
            }
            
            .article-output p,
            .article-output li {
                font-size: 14px;
            }
        }
        
        /* Landscape Mobile Optimization */
        @media (max-width: 768px) and (orientation: landscape) {
            .main-content {
                padding: 70px 20px 16px 20px;
            }
            
            .docs-editor {
                min-height: 300px;
            }
            
            .ai-chat-container {
                max-height: 60vh;
            }
            
            .ai-chat-messages {
                max-height: 30vh;
            }
        }
        
        /* Print Styles */
        @media print {
            .sidebar,
            .mobile-menu-toggle,
            .mobile-overlay,
            .docs-toolbar,
            .word-counter,
            .ai-chat-container,
            button {
                display: none !important;
            }
            
            .main-content {
                padding: 0;
                margin: 0;
            }
            
            .docs-editor {
                padding: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Mobile Menu Toggle Button -->
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">‚ò∞</button>
    
    <!-- Mobile Overlay -->
    <div class="mobile-overlay" onclick="closeMobileMenu()"></div>
    
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="logo">
                <h1>WritgoAI</h1>
                <p>Content Generator v15</p>
            </div>
            
            <div class="menu-item" onclick="showSection('website-scraper')">
                üåê Website Beheer
            </div>
            
            <div class="menu-item" onclick="showSection('keyword-research')">
                üîç Zoekwoordonderzoek
            </div>
            
            <div class="menu-item" onclick="showSection('content-planning')">
                üìÖ Contentplanning
            </div>
            
            <div class="menu-item active" onclick="showSection('seo-writer')">
                ‚úçÔ∏è Content Schrijver
            </div>
            
            <div class="menu-item" onclick="showSection('images')">
                üñºÔ∏è Afbeeldingen & Media
            </div>
            
            <div class="menu-item" onclick="showSection('wordpress')">
                üì§ WordPress Publicatie
            </div>
            
            <div class="menu-item" onclick="showSection('social-media')">
                üì± Social Media
            </div>
            
            <div class="menu-item" onclick="showSection('saved')">
                üíæ Opgeslagen Artikelen
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Website Scraper Section -->
            <div id="website-scraper" class="section">
                <div class="card">
                    <h2>üåê Website Beheer</h2>
                    <p style="color: #666; margin-bottom: 20px;">Laad je WordPress website in om interne links en context te analyseren</p>
                    
                    <div class="form-group">
                        <label>WordPress Site URL</label>
                        <input type="text" id="scraper-site-url" placeholder="https://jouwwebsite.nl">
                        <small style="color: #666; display: block; margin-top: 5px;">De tool zoekt automatisch naar sitemap.xml</small>
                    </div>
                    
                    <button onclick="scrapeWebsite()">üîç Website Inladen</button>
                    
                    <div id="scraper-output" style="margin-top: 20px;"></div>
                </div>
            </div>
            
            <!-- Keyword Research Section -->
            <div id="keyword-research" class="section">
                <div class="card">
                    <h2>üîç Zoekwoordonderzoek</h2>
                    <p style="color: #666; margin-bottom: 20px;">Ontdek gerelateerde keywords en long-tail varianten voor je content</p>
                    
                    <div class="form-group">
                        <label>Hoofd Keyword</label>
                        <input type="text" id="research-keyword" placeholder="Bijv: yoga voor beginners">
                    </div>
                    
                    <button onclick="researchKeyword()">üöÄ Onderzoek Starten</button>
                    
                    <div id="keyword-output" style="margin-top: 20px;"></div>
                </div>
            </div>
            
            <!-- Content Planning Section (Placeholder) -->
            <div id="content-planning" class="section">
                <div class="card">
                    <h2>üìÖ Contentplanning</h2>
                    <div style="text-align: center; padding: 60px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; color: white;">
                        <div style="font-size: 64px; margin-bottom: 20px;">üöÄ</div>
                        <h3 style="font-size: 24px; margin-bottom: 10px;">Binnenkort Beschikbaar</h3>
                        <p style="font-size: 16px; opacity: 0.9;">Deze functie komt beschikbaar in Fase 2</p>
                        <p style="font-size: 14px; opacity: 0.8; margin-top: 20px;">Plan je content, beheer je redactionele kalender en houd je publicatieschema bij</p>
                    </div>
                </div>
            </div>
            
            <!-- SEO Writer Section (Consolidated) -->
            <div id="seo-writer" class="section active">
                <div class="card">
                    <h2>‚úçÔ∏è SEO Content Schrijver</h2>
                    
                    <div class="form-group">
                        <label>Type Content</label>
                        <select id="content-type" onchange="toggleContentTypeFields()">
                            <option value="linkbuilding">Linkbuilding Artikel</option>
                            <option value="general">Algemeen Artikel</option>
                        </select>
                    </div>
                    
                    <!-- Linkbuilding Fields -->
                    <div id="linkbuilding-fields">
                        <div class="form-group">
                            <label>Onderwerp <button onclick="suggestTopic()" class="btn-secondary" style="margin-left:10px; padding:5px 10px; font-size:12px;">ü§ñ Auto-genereer uit URLs</button></label>
                            <input type="text" id="onderwerp" placeholder="Bijv: Hoe kies je de juiste boekhoudsoftware">
                        </div>
                        
                        <div class="two-column">
                            <div class="form-group">
                                <label>Anchor Tekst 1</label>
                                <input type="text" id="anchor1" placeholder="Bijv: zakelijke lease">
                            </div>
                            
                            <div class="form-group">
                                <label>URL 1</label>
                                <input type="url" id="url1" placeholder="https://example.com">
                            </div>
                        </div>
                        
                        <div class="two-column">
                            <div class="form-group">
                                <label>Anchor Tekst 2</label>
                                <input type="text" id="anchor2" placeholder="Bijv: elektrische auto lease">
                            </div>
                            
                            <div class="form-group">
                                <label>URL 2</label>
                                <input type="url" id="url2" placeholder="https://example.com">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>Domein van Plaatsing (optioneel) üÜï</label>
                            <input type="text" id="placement-domain" placeholder="Bijv: www.example.nl (voor stijl-analyse)">
                            <small style="color:#666; font-size:12px;">De AI analyseert dit domein om de schrijfstijl aan te passen</small>
                        </div>
                    </div>
                    
                    <!-- General Article Fields -->
                    <div id="general-fields" style="display:none;">
                        <div class="form-group">
                            <label>Onderwerp</label>
                            <input type="text" id="general-onderwerp" placeholder="Waar wil je over schrijven?">
                        </div>
                        
                        <div class="form-group">
                            <label>Aantal Woorden</label>
                            <input type="number" id="general-words" value="500" min="100" max="3000">
                        </div>
                        
                        <!-- Extra Elements Section -->
                        <div class="form-group">
                            <label style="font-weight: bold; color: #2563eb;">üìã Extra Elementen (Optioneel)</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" id="include-table">
                                    <span>üìä Tabel</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" id="include-faq">
                                    <span>‚ùì FAQ Sectie</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" id="include-bold">
                                    <span>üí™ Bold Tekst</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 8px;">
                                    <input type="checkbox" id="youtube-video">
                                    <span>üì∫ YouTube Video</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Pixabay Images -->
                        <div class="form-group">
                            <label>üì∏ Pixabay Afbeeldingen (Automatisch)</label>
                            <input type="number" id="pixabay-images" value="0" min="0" max="5" placeholder="Aantal afbeeldingen (0-5)">
                            <small style="color: #666; display: block; margin-top: 5px;">Afbeeldingen worden automatisch gezocht in het Engels</small>
                        </div>
                        
                        <!-- DALL-E Images -->
                        <div class="form-group">
                            <label>üé® AI Gegenereerde Afbeeldingen (DALL-E)</label>
                            <input type="number" id="dalle-images" value="0" min="0" max="3" placeholder="Aantal AI afbeeldingen (0-3)">
                            <select id="dalle-style" style="margin-top: 10px;">
                                <option value="realistic photo">Realistische Foto</option>
                                <option value="digital art">Digitale Kunst</option>
                                <option value="illustration">Illustratie</option>
                                <option value="3d render">3D Render</option>
                                <option value="minimalist">Minimalistisch</option>
                            </select>
                            <small style="color: #666; display: block; margin-top: 5px;">Let op: DALL-E kost $0.040 per afbeelding</small>
                        </div>
                        
                        <!-- Perplexity Research -->
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="use-perplexity-research">
                                <span>üîç Perplexity AI Onderzoek (Actuele informatie)</span>
                            </label>
                            <small style="color: #666; display: block; margin-top: 5px;">Voegt actuele informatie en bronnen toe aan het artikel</small>
                        </div>
                        
                        <!-- WordPress Sitemap URL -->
                        <div class="form-group">
                            <label>üîó WordPress Sitemap URL (optioneel)</label>
                            <input type="url" id="wordpress-sitemap-url" placeholder="https://example.com/sitemap.xml">
                            <small style="color: #666; display: block; margin-top: 5px;">Voegt automatisch interne links toe uit je WordPress sitemap</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Direct Publiceren naar WordPress (optioneel)</label>
                            <select id="general-site">
                                <option value="">-- Niet publiceren --</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="general-status-group" style="display:none;">
                            <label>Status</label>
                            <select id="general-status">
                                <option value="draft">Concept</option>
                                <option value="publish">Publiceren</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Extra Context (optioneel)</label>
                        <textarea id="extra" placeholder="Extra informatie of specifieke wensen..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>ü§ñ AI Model</label>
                        <select id="gpt-model">
                            <option value="gpt-4o" selected>GPT-4o (Stable & Reliable)</option>
                        </select>
                    </div>
                    
                    <button onclick="generateArticle()">üöÄ Genereer Artikel</button>
                </div>
                
                <div id="article-output"></div>
            </div>
            
            <!-- WordPress Management Section -->
            <div id="wordpress" class="section">
                <div class="tabs">
                    <button class="tab active" onclick="showTab('wp-sites')">üåê Websites</button>
                    <button class="tab" onclick="showTab('wp-internal')">üîó Interne Links</button>
                    <button class="tab" onclick="showTab('wp-affiliate')">üí∞ Affiliate Links</button>
                </div>
                
                <!-- Sites Tab -->
                <div id="wp-sites" class="tab-content active">
                    <div class="card">
                        <h2>WordPress Sites Toevoegen</h2>
                        
                        <div class="form-group">
                            <label>Site Naam</label>
                            <input type="text" id="wp-site-name" placeholder="Bijv: Mijn Blog">
                        </div>
                        
                        <div class="form-group">
                            <label>Site URL</label>
                            <input type="url" id="wp-site-url" placeholder="https://example.com/">
                        </div>
                        
                        <div class="form-group">
                            <label>Gebruikersnaam</label>
                            <input type="text" id="wp-username" placeholder="WordPress gebruikersnaam">
                        </div>
                        
                        <div class="form-group">
                            <label>Application Password</label>
                            <input type="password" id="wp-app-password" placeholder="xxxx xxxx xxxx xxxx xxxx xxxx">
                        </div>
                        
                        <button onclick="addWordPressSite()">‚ûï Site Toevoegen</button>
                        <p style="margin-top:10px; color:#666; font-size:14px;">
                            üí° Bij toevoegen worden automatisch alle interne links opgehaald!
                        </p>
                    </div>
                    
                    <div class="card">
                        <h2>Mijn WordPress Sites</h2>
                        <ul id="wp-sites-list" class="site-list"></ul>
                    </div>
                </div>
                
                <!-- Internal Links Tab -->
                <div id="wp-internal" class="tab-content">
                    <div class="card">
                        <h2>üîó Interne Links Beheren</h2>
                        
                        <div class="form-group">
                            <label>Selecteer Website</label>
                            <select id="internal-site-select" onchange="loadInternalLinks()">
                                <option value="">-- Kies een website --</option>
                            </select>
                        </div>
                        
                        <button onclick="refreshInternalLinks()" class="btn-secondary">
                            üîÑ Links Verversen
                        </button>
                        
                        <div style="margin-top:20px;">
                            <h3>Links Toevoegen</h3>
                            <div class="two-column" style="margin-top:15px;">
                                <div class="form-group">
                                    <label>Anchor Tekst</label>
                                    <input type="text" id="internal-anchor" placeholder="Link tekst">
                                </div>
                                <div class="form-group">
                                    <label>URL</label>
                                    <input type="url" id="internal-url" placeholder="https://...">
                                </div>
                            </div>
                            <button onclick="addInternalLink()">‚ûï Link Toevoegen</button>
                        </div>
                        
                        <div style="margin-top:30px;">
                            <h3>Huidige Links</h3>
                            <div id="internal-links-list" class="link-list"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Affiliate Links Tab -->
                <div id="wp-affiliate" class="tab-content">
                    <div class="card">
                        <h2>üí∞ Affiliate Links Beheren</h2>
                        
                        <div class="form-group">
                            <label>Selecteer Website</label>
                            <select id="affiliate-site-select" onchange="loadAffiliateLinks()">
                                <option value="">-- Kies een website --</option>
                            </select>
                        </div>
                        
                        <div style="margin-top:20px;">
                            <h3>Affiliate Link Toevoegen</h3>
                            <div class="two-column" style="margin-top:15px;">
                                <div class="form-group">
                                    <label>Anchor Tekst</label>
                                    <input type="text" id="affiliate-anchor" placeholder="Product naam">
                                </div>
                                <div class="form-group">
                                    <label>Affiliate URL</label>
                                    <input type="url" id="affiliate-url" placeholder="https://affiliate-link.com">
                                </div>
                            </div>
                            <button onclick="addAffiliateLink()">‚ûï Link Toevoegen</button>
                        </div>
                        
                        <div style="margin-top:30px;">
                            <h3>Huidige Affiliate Links</h3>
                            <div id="affiliate-links-list" class="link-list"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Images Section -->
            <div id="images" class="section">
                <div class="tabs">
                    <button class="tab active" onclick="showTab('img-pixabay')">üì∑ Afbeeldingen</button>
                    <button class="tab" onclick="showTab('img-videos')">üé¨ Video's</button>
                    <button class="tab" onclick="showTab('img-dalle')">üé® DALL-E 3</button>
                </div>
                
                <!-- Pixabay Images Tab -->
                <div id="img-pixabay" class="tab-content active">
                    <div class="card">
                        <h2>üì∑ Zoek Afbeeldingen op Pixabay</h2>
                        
                        <div class="form-group">
                            <label>Zoekterm</label>
                            <input type="text" id="pixabay-query" placeholder="Bijv: business meeting">
                        </div>
                        
                        <button onclick="searchPixabay()">üîç Zoeken</button>
                        
                        <div id="pixabay-results"></div>
                    </div>
                </div>
                
                <!-- Pixabay Videos Tab -->
                <div id="img-videos" class="tab-content">
                    <div class="card">
                        <h2>üé¨ Zoek Video's op Pixabay</h2>
                        
                        <div class="form-group">
                            <label>Zoekterm</label>
                            <input type="text" id="pixabay-video-query" placeholder="Bijv: nature landscape">
                        </div>
                        
                        <button onclick="searchPixabayVideos()">üîç Zoeken</button>
                        
                        <div id="pixabay-video-results"></div>
                    </div>
                </div>
                
                <!-- DALL-E Tab -->
                <div id="img-dalle" class="tab-content">
                    <div class="card">
                        <h2>üé® Genereer Afbeelding met DALL-E 3</h2>
                        
                        <div class="form-group">
                            <label>Beschrijving</label>
                            <textarea id="dalle-prompt" placeholder="Beschrijf de afbeelding die je wilt genereren..."></textarea>
                        </div>
                        
                        <button onclick="generateDalleImage()">üé® Genereer Afbeelding</button>
                        
                        <div id="dalle-result"></div>
                    </div>
                </div>
            </div>
            
            <!-- Social Media Section (Placeholder) -->
            <div id="social-media" class="section">
                <div class="card">
                    <h2>üì± Social Media</h2>
                    <div style="text-align: center; padding: 60px 20px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: 12px; color: white;">
                        <div style="font-size: 64px; margin-bottom: 20px;">üì±</div>
                        <h3 style="font-size: 24px; margin-bottom: 10px;">Binnenkort Beschikbaar</h3>
                        <p style="font-size: 16px; opacity: 0.9;">Deze functie komt beschikbaar in Fase 4</p>
                        <p style="font-size: 14px; opacity: 0.8; margin-top: 20px;">Genereer social media posts, plan je content en publiceer direct naar je kanalen</p>
                    </div>
                </div>
            </div>
            
            <!-- Saved Articles Section -->
            <div id="saved" class="section">
                <div class="card">
                    <h2>üíæ Opgeslagen Artikelen</h2>
                    <button onclick="loadSavedArticles()" class="btn-secondary">üîÑ Ververs Lijst</button>
                    <div id="saved-articles-list" style="margin-top:20px;"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Word Counter -->
    <div class="word-counter" id="word-counter" style="display: none;">
        <span id="word-count">0</span> woorden
    </div>
    
    <!-- AI Chat Interface -->
    <div class="ai-chat-container" id="ai-chat-container">
        <div class="ai-chat-header">
            <h3>ü§ñ AI Assistent</h3>
            <button class="ai-chat-close" onclick="closeAIChat()">‚úñ</button>
        </div>
        <div class="ai-chat-messages" id="ai-chat-messages">
            <div class="ai-message system">
                Stel je vraag of geef suggesties om de tekst aan te passen
            </div>
        </div>
        <div class="ai-chat-input-container">
            <div class="ai-chat-input">
                <textarea id="ai-chat-input" placeholder="Typ je vraag of suggestie..."></textarea>
                <button onclick="sendAIMessage()">Verstuur</button>
            </div>
        </div>
    </div>
    
    <script>
        const API_URL = '/api';
        let currentArticle = '';
        let currentTopic = '';
        let currentAnchors = {};
        let chatHistory = [];
        
        // Navigation
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
            
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');
            
            // Close mobile menu when a menu item is clicked
            closeMobileMenu();
            
            if (sectionId === 'wordpress') {
                loadWordPressSites();
            } else if (sectionId === 'saved') {
                loadSavedArticles();
            } else if (sectionId === 'seo-writer') {
                loadWordPressSitesForSelect();
            }
        }
        
        function showTab(tabId) {
            const parent = event.target.closest('.section');
            parent.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            parent.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            parent.querySelector(`#${tabId}`).classList.add('active');
            
            if (tabId === 'wp-sites') {
                loadWordPressSites();
            } else if (tabId === 'wp-internal') {
                loadSitesForInternalLinks();
            } else if (tabId === 'wp-affiliate') {
                loadSitesForAffiliateLinks();
            }
        }
        
        // Toggle content type fields
        function toggleContentTypeFields() {
            const contentType = document.getElementById('content-type').value;
            const linkbuildingFields = document.getElementById('linkbuilding-fields');
            const generalFields = document.getElementById('general-fields');
            
            if (contentType === 'linkbuilding') {
                linkbuildingFields.style.display = 'block';
                generalFields.style.display = 'none';
            } else {
                linkbuildingFields.style.display = 'none';
                generalFields.style.display = 'block';
            }
        }
        
        // Show/hide publish status
        document.getElementById('general-site')?.addEventListener('change', function() {
            const statusGroup = document.getElementById('general-status-group');
            if (this.value) {
                statusGroup.style.display = 'block';
            } else {
                statusGroup.style.display = 'none';
            }
        });
        
        // Generate Article (Unified)
        async function generateArticle() {
            const contentType = document.getElementById('content-type').value;
            
            if (contentType === 'linkbuilding') {
                await generateLinkbuildingArticle();
            } else {
                await generateGeneralArticle();
            }
        }
        
        // Linkbuilding Article Generation
        async function suggestTopic() {
            const anchor1 = document.getElementById('anchor1').value;
            const url1 = document.getElementById('url1').value;
            const anchor2 = document.getElementById('anchor2').value;
            const url2 = document.getElementById('url2').value;
            const context = document.getElementById('extra').value;
            
            if (!anchor1 || !url1 || !anchor2 || !url2) {
                alert('Vul eerst de anchor teksten en URLs in!');
                return;
            }
            
            const onderwerpField = document.getElementById('onderwerp');
            onderwerpField.value = 'ü§ñ Onderwerp wordt gegenereerd...';
            onderwerpField.disabled = true;
            
            try {
                const response = await fetch(`${API_URL}/suggest-topic`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ anchor1, url1, anchor2, url2, context })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    onderwerpField.value = data.topic;
                } else {
                    alert('Kon geen onderwerp genereren: ' + data.error);
                    onderwerpField.value = '';
                }
            } catch (error) {
                alert('Fout bij genereren onderwerp: ' + error.message);
                onderwerpField.value = '';
            } finally {
                onderwerpField.disabled = false;
            }
        }
        
        async function generateLinkbuildingArticle() {
            const onderwerp = document.getElementById('onderwerp').value;
            const anchor1 = document.getElementById('anchor1').value;
            const url1 = document.getElementById('url1').value;
            const anchor2 = document.getElementById('anchor2').value;
            const url2 = document.getElementById('url2').value;
            const extra = document.getElementById('extra').value;
            const model = document.getElementById('gpt-model').value;
            const placement_domain = document.getElementById('placement-domain').value;
            
            if (!onderwerp || !anchor1 || !url1 || !anchor2 || !url2) {
                alert('Vul alle verplichte velden in!');
                return;
            }
            
            const output = document.getElementById('article-output');
            output.innerHTML = '<div class="loading"><div class="spinner"></div><p>Artikel wordt gegenereerd...</p></div>';
            
            try {
                const response = await fetch(`${API_URL}/generate-article`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ onderwerp, anchor1, url1, anchor2, url2, extra, model, placement_domain })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    currentArticle = data.article;
                    currentTopic = onderwerp;
                    currentAnchors = { anchor1, url1, anchor2, url2 };
                    chatHistory = [];
                    
                    output.innerHTML = `
                        <div class="card">
                            <h2>‚úÖ Artikel Gegenereerd!</h2>
                            <div style="margin-bottom: 20px;">
                                <button onclick="saveArticle('${onderwerp}', getCurrentEditorContent(), '${anchor1}', '${url1}', '${anchor2}', '${url2}', ${data.word_count}, null, null)">üíæ Opslaan</button>
                                <button onclick="copyToClipboard(getCurrentEditorContent())" class="btn-secondary">üìã Kopieer HTML</button>
                                <button onclick="openAIChat()" class="btn-success">üí¨ AI Assistent</button>
                            </div>
                        </div>
                        <div class="docs-editor-container">
                            <div class="docs-toolbar">
                                <button onclick="formatText('bold')"><strong>B</strong></button>
                                <button onclick="formatText('italic')"><em>I</em></button>
                                <button onclick="formatText('underline')"><u>U</u></button>
                                <div style="width: 1px; height: 20px; background: #dadce0; margin: 0 4px;"></div>
                                <button onclick="insertHeading(1)">H1</button>
                                <button onclick="insertHeading(2)">H2</button>
                                <button onclick="insertHeading(3)">H3</button>
                            </div>
                            <div class="docs-editor" id="text-editor" contenteditable="true" oninput="updateWordCounter()">
                                ${data.article}
                            </div>
                        </div>
                    `;
                    
                    updateWordCounter();
                    
                } else {
                    output.innerHTML = `<div class="alert alert-error">‚ùå ${data.error}</div>`;
                }
            } catch (error) {
                output.innerHTML = `<div class="alert alert-error">‚ùå Fout: ${error.message}</div>`;
            }
        }
        
        // General Article Generation
        async function generateGeneralArticle() {
            const onderwerp = document.getElementById('general-onderwerp').value;
            const word_count = document.getElementById('general-words').value;
            const extra = document.getElementById('extra').value;
            const model = document.getElementById('gpt-model').value;
            const site_id = document.getElementById('general-site').value;
            const status = document.getElementById('general-status').value;
            
            const include_table = document.getElementById('include-table').checked;
            const include_faq = document.getElementById('include-faq').checked;
            const include_bold = document.getElementById('include-bold').checked;
            const youtube_video = document.getElementById('youtube-video').checked;
            const pixabay_images = parseInt(document.getElementById('pixabay-images').value) || 0;
            const dalle_images = parseInt(document.getElementById('dalle-images').value) || 0;
            const dalle_style = document.getElementById('dalle-style').value;
            const use_research = document.getElementById('use-perplexity-research').checked;
            const wordpress_site_url = document.getElementById('wordpress-sitemap-url').value;
            
            if (!onderwerp) {
                alert('Vul het onderwerp in!');
                return;
            }
            
            const output = document.getElementById('article-output');
            output.innerHTML = '<div class="loading"><div class="spinner"></div><p>Artikel wordt gegenereerd...</p></div>';
            
            try {
                const payload = { 
                    onderwerp, 
                    word_count: parseInt(word_count), 
                    extra, 
                    model,
                    include_table,
                    include_faq,
                    include_bold,
                    youtube_video,
                    pixabay_images,
                    dalle_images,
                    dalle_style,
                    perplexity_research: use_research,
                    wordpress_site_url
                };
                
                if (site_id) {
                    payload.site_id = parseInt(site_id);
                    payload.status = status;
                }
                
                const response = await fetch(`${API_URL}/generate-general-article`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    currentArticle = data.article;
                    currentTopic = onderwerp;
                    currentAnchors = {};
                    chatHistory = [];
                    
                    let html = `
                        <div class="card">
                            <h2>‚úÖ Artikel Gegenereerd!</h2>
                    `;
                    
                    if (data.published) {
                        html += `
                            <div class="alert alert-success">
                                üéâ Artikel gepubliceerd op WordPress!<br>
                                <a href="${data.post_url}" target="_blank">Bekijk artikel ‚Üí</a>
                            </div>
                        `;
                    }
                    
                    html += `
                            <div style="margin-bottom: 20px;">
                                <button onclick="copyToClipboard(getCurrentEditorContent())" class="btn-secondary">üìã Kopieer HTML</button>
                                <button onclick="openAIChat()" class="btn-success">üí¨ AI Assistent</button>
                            </div>
                        </div>
                        <div class="docs-editor-container">
                            <div class="docs-toolbar">
                                <button onclick="formatText('bold')"><strong>B</strong></button>
                                <button onclick="formatText('italic')"><em>I</em></button>
                                <button onclick="formatText('underline')"><u>U</u></button>
                                <div style="width: 1px; height: 20px; background: #dadce0; margin: 0 4px;"></div>
                                <button onclick="insertHeading(1)">H1</button>
                                <button onclick="insertHeading(2)">H2</button>
                                <button onclick="insertHeading(3)">H3</button>
                            </div>
                            <div class="docs-editor" id="text-editor" contenteditable="true" oninput="updateWordCounter()">
                                ${data.article}
                            </div>
                        </div>
                    `;
                    
                    output.innerHTML = html;
                    updateWordCounter();
                    
                } else {
                    output.innerHTML = `<div class="alert alert-error">‚ùå ${data.error}</div>`;
                }
            } catch (error) {
                output.innerHTML = `<div class="alert alert-error">‚ùå Fout: ${error.message}</div>`;
            }
        }
        
        // AI Chat Functions
        function openAIChat() {
            document.getElementById('ai-chat-container').classList.add('active');
        }
        
        function closeAIChat() {
            document.getElementById('ai-chat-container').classList.remove('active');
        }
        
        async function sendAIMessage() {
            const input = document.getElementById('ai-chat-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            const messagesContainer = document.getElementById('ai-chat-messages');
            
            // Add user message
            const userMsg = document.createElement('div');
            userMsg.className = 'ai-message user';
            userMsg.textContent = message;
            messagesContainer.appendChild(userMsg);
            
            input.value = '';
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Show loading
            const loadingMsg = document.createElement('div');
            loadingMsg.className = 'ai-message assistant';
            loadingMsg.textContent = 'ü§î Aan het nadenken...';
            messagesContainer.appendChild(loadingMsg);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            try {
                const editor = document.getElementById('text-editor');
                const currentContent = editor ? editor.innerHTML : currentArticle;
                
                const response = await fetch(`${API_URL}/refine-article`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        article: currentContent,
                        topic: currentTopic,
                        request: message,
                        anchors: currentAnchors,
                        model: document.getElementById('gpt-model').value
                    })
                });
                
                const data = await response.json();
                
                messagesContainer.removeChild(loadingMsg);
                
                if (data.success) {
                    // Update editor
                    if (editor) {
                        editor.innerHTML = data.article;
                        currentArticle = data.article;
                        updateWordCounter();
                    }
                    
                    // Add success message
                    const assistantMsg = document.createElement('div');
                    assistantMsg.className = 'ai-message assistant';
                    assistantMsg.textContent = '‚úÖ Artikel is aangepast volgens je suggestie!';
                    messagesContainer.appendChild(assistantMsg);
                } else {
                    const errorMsg = document.createElement('div');
                    errorMsg.className = 'ai-message assistant';
                    errorMsg.textContent = '‚ùå Fout: ' + data.error;
                    messagesContainer.appendChild(errorMsg);
                }
                
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
            } catch (error) {
                messagesContainer.removeChild(loadingMsg);
                const errorMsg = document.createElement('div');
                errorMsg.className = 'ai-message assistant';
                errorMsg.textContent = '‚ùå Fout: ' + error.message;
                messagesContainer.appendChild(errorMsg);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }
        
        // Allow Enter to send message (Shift+Enter for new line)
        document.getElementById('ai-chat-input')?.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendAIMessage();
            }
        });
        
        // Editor Functions
        function formatText(command) {
            document.execCommand(command, false, null);
        }
        
        function insertHeading(level) {
            document.execCommand('formatBlock', false, `h${level}`);
        }
        
        function getCurrentEditorContent() {
            const editor = document.getElementById('text-editor');
            return editor ? editor.innerHTML : '';
        }
        
        function updateWordCounter() {
            const editor = document.getElementById('text-editor');
            if (!editor) return;
            
            const text = editor.innerText || editor.textContent;
            const wordCount = text.trim().split(/\s+/).filter(w => w.length > 0).length;
            
            const counter = document.getElementById('word-counter');
            const countSpan = document.getElementById('word-count');
            
            if (counter && countSpan) {
                counter.style.display = 'block';
                countSpan.textContent = wordCount;
            }
        }
        
        function copyToClipboard(html) {
            const textarea = document.createElement('textarea');
            textarea.value = html;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            alert('‚úÖ HTML gekopieerd naar klembord!');
        }
        
        // Save Article
        async function saveArticle(title, content, anchor1, url1, anchor2, url2, wordCount, humanScore, aiScore) {
            try {
                const response = await fetch(`${API_URL}/articles`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        title,
                        content_html: content,
                        article_type: 'linkbuilding',
                        anchor1,
                        url1,
                        anchor2,
                        url2,
                        word_count: wordCount,
                        human_score: humanScore,
                        ai_score: aiScore
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úÖ Artikel opgeslagen!');
                } else {
                    alert('‚ùå Fout bij opslaan: ' + data.error);
                }
            } catch (error) {
                alert('‚ùå Fout: ' + error.message);
            }
        }
        
        // Load Saved Articles
        async function loadSavedArticles() {
            try {
                const response = await fetch(`${API_URL}/articles`);
                const data = await response.json();
                
                const list = document.getElementById('saved-articles-list');
                
                if (data.success && data.articles.length > 0) {
                    list.innerHTML = data.articles.map(article => `
                        <div class="card">
                            <h3>${article.title}</h3>
                            <p><strong>Woorden:</strong> ${article.word_count}</p>
                            <p><strong>Aangemaakt:</strong> ${new Date(article.created_at).toLocaleString('nl-NL')}</p>
                            <div style="margin-top:10px;">
                                <button onclick="viewArticle(${article.id})" class="btn-secondary">üëÅÔ∏è Bekijken</button>
                                <button onclick="deleteArticle(${article.id})" class="btn-danger">üóëÔ∏è Verwijderen</button>
                            </div>
                        </div>
                    `).join('');
                } else {
                    list.innerHTML = '<p>Geen opgeslagen artikelen gevonden.</p>';
                }
            } catch (error) {
                alert('Fout bij laden artikelen: ' + error.message);
            }
        }
        
        async function viewArticle(id) {
            try {
                const response = await fetch(`${API_URL}/articles/${id}`);
                const data = await response.json();
                
                if (data.success) {
                    const article = data.article;
                    const output = document.getElementById('article-output');
                    
                    output.innerHTML = `
                        <div class="card">
                            <h2>${article.title}</h2>
                            <div class="article-output">
                                ${article.content_html}
                            </div>
                        </div>
                    `;
                    
                    showSection('seo-writer');
                }
            } catch (error) {
                alert('Fout bij laden artikel: ' + error.message);
            }
        }
        
        async function deleteArticle(id) {
            if (!confirm('Weet je zeker dat je dit artikel wilt verwijderen?')) return;
            
            try {
                const response = await fetch(`${API_URL}/articles/${id}`, {
                    method: 'DELETE'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úÖ Artikel verwijderd!');
                    loadSavedArticles();
                } else {
                    alert('‚ùå Fout bij verwijderen: ' + data.error);
                }
            } catch (error) {
                alert('‚ùå Fout: ' + error.message);
            }
        }
        
        // WordPress Functions
        async function loadWordPressSites() {
            try {
                const response = await fetch(`${API_URL}/wordpress-sites`);
                const data = await response.json();
                
                const list = document.getElementById('wp-sites-list');
                
                if (data.success && data.sites.length > 0) {
                    list.innerHTML = data.sites.map(site => `
                        <li class="site-item">
                            <div class="site-info">
                                <h4>${site.site_name}</h4>
                                <p>${site.site_url}</p>
                            </div>
                            <div class="site-actions">
                                <button onclick="deleteWordPressSite(${site.id})" class="btn-danger">üóëÔ∏è Verwijderen</button>
                            </div>
                        </li>
                    `).join('');
                } else {
                    list.innerHTML = '<li>Geen WordPress sites gevonden.</li>';
                }
            } catch (error) {
                alert('Fout bij laden sites: ' + error.message);
            }
        }
        
        async function addWordPressSite() {
            const siteName = document.getElementById('wp-site-name').value;
            const siteUrl = document.getElementById('wp-site-url').value;
            const username = document.getElementById('wp-username').value;
            const appPassword = document.getElementById('wp-app-password').value;
            
            if (!siteName || !siteUrl || !username || !appPassword) {
                alert('Vul alle velden in!');
                return;
            }
            
            try {
                const response = await fetch(`${API_URL}/wordpress-sites`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ site_name: siteName, site_url: siteUrl, username, app_password: appPassword })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úÖ Site toegevoegd!');
                    document.getElementById('wp-site-name').value = '';
                    document.getElementById('wp-site-url').value = '';
                    document.getElementById('wp-username').value = '';
                    document.getElementById('wp-app-password').value = '';
                    loadWordPressSites();
                } else {
                    alert('‚ùå Fout: ' + data.error);
                }
            } catch (error) {
                alert('‚ùå Fout: ' + error.message);
            }
        }
        
        async function deleteWordPressSite(id) {
            if (!confirm('Weet je zeker dat je deze site wilt verwijderen?')) return;
            
            try {
                const response = await fetch(`${API_URL}/wordpress-sites/${id}`, {
                    method: 'DELETE'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úÖ Site verwijderd!');
                    loadWordPressSites();
                } else {
                    alert('‚ùå Fout: ' + data.error);
                }
            } catch (error) {
                alert('‚ùå Fout: ' + error.message);
            }
        }
        
        async function loadWordPressSitesForSelect() {
            try {
                const response = await fetch(`${API_URL}/wordpress-sites`);
                const data = await response.json();
                
                const select = document.getElementById('general-site');
                
                if (data.success && data.sites.length > 0) {
                    select.innerHTML = '<option value="">-- Niet publiceren --</option>' +
                        data.sites.map(site => `<option value="${site.id}">${site.site_name}</option>`).join('');
                }
            } catch (error) {
                console.error('Fout bij laden sites:', error);
            }
        }
        
        async function loadSitesForInternalLinks() {
            try {
                const response = await fetch(`${API_URL}/wordpress-sites`);
                const data = await response.json();
                
                const select = document.getElementById('internal-site-select');
                
                if (data.success && data.sites.length > 0) {
                    select.innerHTML = '<option value="">-- Kies een website --</option>' +
                        data.sites.map(site => `<option value="${site.id}">${site.site_name}</option>`).join('');
                }
            } catch (error) {
                console.error('Fout bij laden sites:', error);
            }
        }
        
        async function loadSitesForAffiliateLinks() {
            try {
                const response = await fetch(`${API_URL}/wordpress-sites`);
                const data = await response.json();
                
                const select = document.getElementById('affiliate-site-select');
                
                if (data.success && data.sites.length > 0) {
                    select.innerHTML = '<option value="">-- Kies een website --</option>' +
                        data.sites.map(site => `<option value="${site.id}">${site.site_name}</option>`).join('');
                }
            } catch (error) {
                console.error('Fout bij laden sites:', error);
            }
        }
        
        async function loadInternalLinks() {
            const siteId = document.getElementById('internal-site-select').value;
            if (!siteId) return;
            
            try {
                const response = await fetch(`${API_URL}/wordpress-sites/${siteId}/internal-links`);
                const data = await response.json();
                
                const list = document.getElementById('internal-links-list');
                
                if (data.success && data.links.length > 0) {
                    list.innerHTML = data.links.map(link => `
                        <div class="link-item">
                            <div class="link-info">
                                <strong>${link.anchor_text}</strong>
                                <small>${link.url}</small>
                            </div>
                            <button onclick="deleteInternalLink(${link.id})" class="btn-danger" style="padding:5px 10px; font-size:12px;">üóëÔ∏è</button>
                        </div>
                    `).join('');
                } else {
                    list.innerHTML = '<p>Geen interne links gevonden.</p>';
                }
            } catch (error) {
                alert('Fout bij laden links: ' + error.message);
            }
        }
        
        async function addInternalLink() {
            const siteId = document.getElementById('internal-site-select').value;
            const anchorText = document.getElementById('internal-anchor').value;
            const url = document.getElementById('internal-url').value;
            
            if (!siteId || !anchorText || !url) {
                alert('Vul alle velden in!');
                return;
            }
            
            try {
                const response = await fetch(`${API_URL}/wordpress-sites/${siteId}/internal-links`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ anchor_text: anchorText, url })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úÖ Link toegevoegd!');
                    document.getElementById('internal-anchor').value = '';
                    document.getElementById('internal-url').value = '';
                    loadInternalLinks();
                } else {
                    alert('‚ùå Fout: ' + data.error);
                }
            } catch (error) {
                alert('‚ùå Fout: ' + error.message);
            }
        }
        
        async function deleteInternalLink(id) {
            if (!confirm('Weet je zeker dat je deze link wilt verwijderen?')) return;
            
            try {
                const response = await fetch(`${API_URL}/internal-links/${id}`, {
                    method: 'DELETE'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úÖ Link verwijderd!');
                    loadInternalLinks();
                } else {
                    alert('‚ùå Fout: ' + data.error);
                }
            } catch (error) {
                alert('‚ùå Fout: ' + error.message);
            }
        }
        
        async function refreshInternalLinks() {
            const siteId = document.getElementById('internal-site-select').value;
            if (!siteId) {
                alert('Selecteer eerst een website!');
                return;
            }
            
            alert('üîÑ Links worden vernieuwd... Dit kan even duren.');
            
            try {
                const response = await fetch(`${API_URL}/wordpress-sites/${siteId}/posts`);
                const data = await response.json();
                
                if (data.success) {
                    alert(`‚úÖ ${data.posts.length} posts gevonden!`);
                    loadInternalLinks();
                } else {
                    alert('‚ùå Fout: ' + data.error);
                }
            } catch (error) {
                alert('‚ùå Fout: ' + error.message);
            }
        }
        
        async function loadAffiliateLinks() {
            const siteId = document.getElementById('affiliate-site-select').value;
            if (!siteId) return;
            
            try {
                const response = await fetch(`${API_URL}/wordpress-sites/${siteId}/affiliate-links`);
                const data = await response.json();
                
                const list = document.getElementById('affiliate-links-list');
                
                if (data.success && data.links.length > 0) {
                    list.innerHTML = data.links.map(link => `
                        <div class="link-item">
                            <div class="link-info">
                                <strong>${link.anchor_text}</strong>
                                <small>${link.url}</small>
                            </div>
                            <button onclick="deleteAffiliateLink(${link.id})" class="btn-danger" style="padding:5px 10px; font-size:12px;">üóëÔ∏è</button>
                        </div>
                    `).join('');
                } else {
                    list.innerHTML = '<p>Geen affiliate links gevonden.</p>';
                }
            } catch (error) {
                alert('Fout bij laden links: ' + error.message);
            }
        }
        
        async function addAffiliateLink() {
            const siteId = document.getElementById('affiliate-site-select').value;
            const anchorText = document.getElementById('affiliate-anchor').value;
            const url = document.getElementById('affiliate-url').value;
            
            if (!siteId || !anchorText || !url) {
                alert('Vul alle velden in!');
                return;
            }
            
            try {
                const response = await fetch(`${API_URL}/wordpress-sites/${siteId}/affiliate-links`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ anchor_text: anchorText, url })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úÖ Link toegevoegd!');
                    document.getElementById('affiliate-anchor').value = '';
                    document.getElementById('affiliate-url').value = '';
                    loadAffiliateLinks();
                } else {
                    alert('‚ùå Fout: ' + data.error);
                }
            } catch (error) {
                alert('‚ùå Fout: ' + error.message);
            }
        }
        
        async function deleteAffiliateLink(id) {
            if (!confirm('Weet je zeker dat je deze link wilt verwijderen?')) return;
            
            try {
                const response = await fetch(`${API_URL}/affiliate-links/${id}`, {
                    method: 'DELETE'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    alert('‚úÖ Link verwijderd!');
                    loadAffiliateLinks();
                } else {
                    alert('‚ùå Fout: ' + data.error);
                }
            } catch (error) {
                alert('‚ùå Fout: ' + error.message);
            }
        }
        
        // Image Functions
        async function searchPixabay() {
            const query = document.getElementById('pixabay-query').value;
            if (!query) {
                alert('Vul een zoekterm in!');
                return;
            }
            
            const results = document.getElementById('pixabay-results');
            results.innerHTML = '<div class="loading"><div class="spinner"></div><p>Zoeken...</p></div>';
            
            try {
                const response = await fetch(`${API_URL}/search-images`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ query, per_page: 20 })
                });
                
                const data = await response.json();
                
                if (data.success && data.images.length > 0) {
                    results.innerHTML = `
                        <h3 style="margin-top:20px;">${data.total} resultaten gevonden</h3>
                        <div class="image-grid">
                            ${data.images.map(img => `
                                <div class="image-item" onclick="copyImageUrl('${img.url}')">
                                    <img src="${img.preview}" alt="${img.tags}">
                                </div>
                            `).join('')}
                        </div>
                    `;
                } else {
                    results.innerHTML = '<p>Geen afbeeldingen gevonden.</p>';
                }
            } catch (error) {
                results.innerHTML = `<div class="alert alert-error">‚ùå Fout: ${error.message}</div>`;
            }
        }
        
        async function searchPixabayVideos() {
            const query = document.getElementById('pixabay-video-query').value;
            if (!query) {
                alert('Vul een zoekterm in!');
                return;
            }
            
            const results = document.getElementById('pixabay-video-results');
            results.innerHTML = '<div class="loading"><div class="spinner"></div><p>Zoeken...</p></div>';
            
            try {
                const response = await fetch(`${API_URL}/search-videos`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ query, per_page: 12 })
                });
                
                const data = await response.json();
                
                if (data.success && data.videos.length > 0) {
                    results.innerHTML = `
                        <h3 style="margin-top:20px;">${data.total} resultaten gevonden</h3>
                        <div class="image-grid">
                            ${data.videos.map(video => `
                                <div class="image-item" onclick="copyVideoUrl('${video.url}')">
                                    <img src="${video.thumbnail}" alt="Video">
                                    <p style="padding:10px; font-size:12px;">‚è±Ô∏è ${video.duration}s</p>
                                </div>
                            `).join('')}
                        </div>
                    `;
                } else {
                    results.innerHTML = '<p>Geen video\'s gevonden.</p>';
                }
            } catch (error) {
                results.innerHTML = `<div class="alert alert-error">‚ùå Fout: ${error.message}</div>`;
            }
        }
        
        async function generateDalleImage() {
            const prompt = document.getElementById('dalle-prompt').value;
            if (!prompt) {
                alert('Vul een beschrijving in!');
                return;
            }
            
            const results = document.getElementById('dalle-result');
            results.innerHTML = '<div class="loading"><div class="spinner"></div><p>Afbeelding wordt gegenereerd...</p></div>';
            
            try {
                const response = await fetch(`${API_URL}/generate-dalle-image`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    results.innerHTML = `
                        <div style="margin-top:20px;">
                            <img src="${data.image_url}" alt="Generated" style="max-width:100%; border-radius:8px;">
                            <button onclick="copyImageUrl('${data.image_url}')" style="margin-top:10px;">üìã Kopieer URL</button>
                        </div>
                    `;
                } else {
                    results.innerHTML = `<div class="alert alert-error">‚ùå Fout: ${data.error}</div>`;
                }
            } catch (error) {
                results.innerHTML = `<div class="alert alert-error">‚ùå Fout: ${error.message}</div>`;
            }
        }
        
        function copyImageUrl(url) {
            navigator.clipboard.writeText(url);
            alert('‚úÖ URL gekopieerd naar klembord!');
        }
        
        function copyVideoUrl(url) {
            navigator.clipboard.writeText(url);
            alert('‚úÖ Video URL gekopieerd naar klembord!');
        }
        
        // Website Scraper Functions
        async function scrapeWebsite() {
            const siteUrl = document.getElementById('scraper-site-url').value.trim();
            const output = document.getElementById('scraper-output');
            
            if (!siteUrl) {
                output.innerHTML = '<div class="alert alert-error">‚ùå Voer een website URL in</div>';
                return;
            }
            
            output.innerHTML = '<div class="alert alert-info">üîç Website wordt ingeladen...</div>';
            
            try {
                const response = await fetch('/api/scrape-website', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ site_url: siteUrl })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    // Save to localStorage
                    localStorage.setItem('scraped_website', JSON.stringify(data));
                    
                    let html = `
                        <div class="alert alert-success">
                            ‚úÖ Website succesvol ingeladen!<br>
                            <strong>Site:</strong> ${data.site_url}<br>
                            <strong>Sitemap:</strong> ${data.sitemap_url || 'Niet gevonden'}<br>
                            <strong>Links gevonden:</strong> ${data.total_links}
                        </div>
                        
                        <div class="card" style="margin-top: 20px;">
                            <h3>üìä Website Context</h3>
                            <pre style="background: #f5f5f5; padding: 15px; border-radius: 8px; white-space: pre-wrap;">${data.context}</pre>
                        </div>
                    `;
                    
                    if (data.links && data.links.length > 0) {
                        html += `
                            <div class="card" style="margin-top: 20px;">
                                <h3>üîó Interne Links (${data.links.length})</h3>
                                <div style="max-height: 400px; overflow-y: auto;">
                                    <table style="width: 100%; border-collapse: collapse;">
                                        <thead>
                                            <tr style="background: #f5f5f5;">
                                                <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">URL</th>
                                                <th style="padding: 10px; text-align: center; border-bottom: 2px solid #ddd; width: 100px;">Actie</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                        `;
                        
                        data.links.forEach(link => {
                            html += `
                                <tr style="border-bottom: 1px solid #eee;">
                                    <td style="padding: 10px; font-size: 13px;">${link.url}</td>
                                    <td style="padding: 10px; text-align: center;">
                                        <button onclick="copyToClipboard('${link.url}')" style="padding: 5px 10px; font-size: 12px;">üìã</button>
                                    </td>
                                </tr>
                            `;
                        });
                        
                        html += `
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        `;
                    }
                    
                    output.innerHTML = html;
                } else {
                    output.innerHTML = `<div class="alert alert-error">‚ùå Fout: ${data.error}</div>`;
                }
            } catch (error) {
                output.innerHTML = `<div class="alert alert-error">‚ùå Fout: ${error.message}</div>`;
            }
        }
        
        // Keyword Research Functions
        async function researchKeyword() {
            const keyword = document.getElementById('research-keyword').value.trim();
            const output = document.getElementById('keyword-output');
            
            if (!keyword) {
                output.innerHTML = '<div class="alert alert-error">‚ùå Voer een keyword in</div>';
                return;
            }
            
            output.innerHTML = '<div class="alert alert-info">üîç Keyword wordt onderzocht...</div>';
            
            try {
                const response = await fetch('/api/keyword-research', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ keyword: keyword })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    // Save to localStorage
                    localStorage.setItem('keyword_research', JSON.stringify(data));
                    
                    let html = `
                        <div class="alert alert-success">
                            ‚úÖ Keyword onderzoek voltooid!<br>
                            <strong>Hoofd keyword:</strong> ${data.keyword}<br>
                            <strong>Suggesties gevonden:</strong> ${data.total}
                        </div>
                        
                        <div class="card" style="margin-top: 20px;">
                            <h3>üìä Keyword Suggesties</h3>
                            <div style="max-height: 500px; overflow-y: auto;">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="background: #f5f5f5;">
                                            <th style="padding: 10px; text-align: left; border-bottom: 2px solid #ddd;">Keyword</th>
                                            <th style="padding: 10px; text-align: center; border-bottom: 2px solid #ddd; width: 100px;">Volume</th>
                                            <th style="padding: 10px; text-align: center; border-bottom: 2px solid #ddd; width: 100px;">Moeilijkheid</th>
                                            <th style="padding: 10px; text-align: center; border-bottom: 2px solid #ddd; width: 100px;">Type</th>
                                            <th style="padding: 10px; text-align: center; border-bottom: 2px solid #ddd; width: 80px;">Actie</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                    `;
                    
                    data.keywords.forEach(kw => {
                        const volumeColor = kw.volume === 'Hoog' ? '#22c55e' : kw.volume === 'Gemiddeld' ? '#f59e0b' : '#6b7280';
                        const difficultyColor = kw.difficulty === 'Laag' ? '#22c55e' : kw.difficulty === 'Gemiddeld' ? '#f59e0b' : '#ef4444';
                        
                        html += `
                            <tr style="border-bottom: 1px solid #eee;">
                                <td style="padding: 10px; font-size: 14px;"><strong>${kw.keyword}</strong></td>
                                <td style="padding: 10px; text-align: center;">
                                    <span style="background: ${volumeColor}; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">${kw.volume}</span>
                                </td>
                                <td style="padding: 10px; text-align: center;">
                                    <span style="background: ${difficultyColor}; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">${kw.difficulty}</span>
                                </td>
                                <td style="padding: 10px; text-align: center; font-size: 12px; color: #666;">${kw.type}</td>
                                <td style="padding: 10px; text-align: center;">
                                    <button onclick="copyToClipboard('${kw.keyword}')" style="padding: 5px 10px; font-size: 12px;">üìã</button>
                                </td>
                            </tr>
                        `;
                    });
                    
                    html += `
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    `;
                    
                    output.innerHTML = html;
                } else {
                    output.innerHTML = `<div class="alert alert-error">‚ùå Fout: ${data.error}</div>`;
                }
            } catch (error) {
                output.innerHTML = `<div class="alert alert-error">‚ùå Fout: ${error.message}</div>`;
            }
        }
        
        // Helper function to copy to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text);
            alert('‚úÖ Gekopieerd naar klembord!');
        }
        
        // Mobile Menu
        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.querySelector('.mobile-overlay');
            sidebar.classList.toggle('mobile-open');
            overlay.classList.toggle('active');
        }
        
        function closeMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.querySelector('.mobile-overlay');
            sidebar.classList.remove('mobile-open');
            overlay.classList.remove('active');
        }
        
        // Initialize
        window.addEventListener('load', function() {
            loadWordPressSitesForSelect();
        });
    </script>
</body>
</html>
